# BELUGA Firmware

McMaster DARE BELUGA Firmware.

## Table of Contents
1. [Prerequisites](#prerequisites)
2. [Setting Up the Project](#setting-up-the-project)
4. [Project Structure](#project-structure)
5. [CMake Configuration](#cmake-configuration)
6. [License](#license)

---

## Prerequisites

Before setting up the project, ensure you have the following installed on your system:

- **CMake** (version 3.22 or higher)
- **Python 3**
- **GCC ARM Embedded Toolchain** (`gcc-arm-none-eabi`)
- **libnewlib-arm-none-eabi**
- **libstdc++-arm-none-eabi-newlib**
- **Git**

You can install these dependencies using the following command:

```bash
sudo apt install cmake python3 build-essential gcc-arm-none-eabi libnewlib-arm-none-eabi libstdc++-arm-none-eabi-newlib
```

---

## Setting Up the Project

1. **Clone the Repository**:
   ```bash
   git clone <repository-url>
   cd BELUGA-FW
   ```

2. **Run the Setup/Build Script**:
   The setup script will install dependencies, clone the Pico SDK, and prepare the build environment.
   ```bash
   chmod +x docmake.sh
   ./docmake.sh
   ```

   This script will:
   - Create a `dep` directory and clone the Pico SDK into it.
   - Create a `build` directory for the build files.

   The compiled binaries (e.g., `beluga.elf`, `beluga.uf2`) will be placed in the `/bin` directory at the root of the project.

---

## Project Structure

The project has the following structure:

```
BELUGA-FW/
├── bin/                  # Output directory for compiled binaries
├── build/                # Build directory (generated by CMake)
├── dep/                  # Dependencies (e.g., Pico SDK)
│   └── pico-sdk/         # Raspberry Pi Pico SDK
├── src/                  # Source code directory
├── CMakeLists.txt        # CMake configuration file
├── docmake.sh              # Setup script for dependencies and build environment
└── README.md             # This file
```

---

## CMake Configuration

The `CMakeLists.txt` file configures the build system for the project. Key configurations include:

- **C++ Standard**: C++20 is used for the project.
- **Pico SDK Integration**: The Pico SDK is included and initialized.
- **Output Directory**: Compiled binaries are placed in the `/bin` directory.
- **Target Executable**: The `beluga` executable is built from source files in the `src/` directory.
- **Linked Libraries**: The project links against the Pico SDK libraries (`pico_stdlib`, `hardware_pwm`, `hardware_gpio`, `hardware_i2c`).

---